# 05_최신 자바스크립트 문법과 기능

## 5.1 애플리케이션 분리의 중요성
모듈형 자바스크립트는 애플리케이션을 모듈 단위로 쪼갤 수 있다. 애플리케이션은 여러개의 중첩된 모듈로 구성될 수 있다. 확장 가능한 자바스크립트 생태계에서 애플리케이션이 모듈형이라는 것은 잘게 분리된 모듈로 구성되었음을 뜻한다. 이렇게 이루어진 느슨한 결합은 의존성을 낮추어 애플리케이션의 유지보수를 용이하게 만든다. 또한 모듈을 이용해 애플리케이션을 효율적으로 구현하면 어느 한 부분의 변경이 다른 부분에 어떤 영향을 미칠 수 있을지 쉽게 확인할 수 있다.

## 5.2 모듈 가져오기와 내보내기
모듈을 사용하면 각 기능에 맞는 독립적인 단위로 코드를 분리할 수 있다. <br />
자바스크립트 모듈(또는 ES 모듈)은 ES2015부터 import 키워드를 통해 의존성을 가진 모듈을 가져오고, export 키워드를 통해 모듈을 내보낸다.

## 5.3 모듈 객체
모듈을 객체로 가져오면 모듈 리소스를 깔끔하게 가져올 수 있다. 
```javascript
import * as Staff from "/modules/staff.mjs";
```

## 5.4 외부 소스로부터 가져오는 모듈
ES2015부터는 외부 소스에서 가져오는 원격 모듈(예: 서드 파티 라이브러리)을 쉽게 가져올 수 있게 되었다.
```javascript
import { cakeFactory } from "https://example.com/modules/cakeFactory.mjs";
```

## 5.5 정적으로 모듈 가져오기
위의 예시들은 정적 가져오기(static import)이다. 정적 가져오기는 메인 코드를 실행하기 전에 먼저 모듈을 다운로드하고 실행해야 한다. 따라서 초기 페이지 로드 시 많은 코드를 미리 로드해야 하므로 성능에 문제가 생길 수도 있다.

## 5.6 동적으로 모듈 가져오기
지연 로딩(lazy-loading)모듈을 사용하면 필요한 시점에 로드할 수 있다. 예를 들어 사용자가 링크나 버튼을 클릭할 때 로드하게 만들 수 있어 초기 로딩 시간을 줄일 수 있다.
```javascript
form.addEventListener("submit", e => {
    e.preventDefault();
    import("/modules/cakeFactory.js")
    .then((module) => {
        // 가져온 모듈 사용하기
        module.oven.makeCupcake("springkles");
        module.oven.makeMuffin("large");
    })
});
```
동적 가져오기는 await와 함께 사용할 수 있다.

### 5.6.1 사용자 상호작용에 따라 가져오기
일부 기능은 사용자가 상호작용할 때만 필요할 수도 있다. 채팅 창이나 다이얼로그, 비디오 등이 대표적인 예시이다. 이런 기능은 페이지 로드 시점에 필요한 게 아니니 사용자가 컴포넌트를 클릭하는 등 상호작용에 따라 로드되는 것이 좋다.

### 5.6.2 화면에 보이면 가져오기
IntersectionObserver API를 사용하면 컴포넌트가 화면에 보이는지 감지할 수 있고, 이에 따라 모듈을 동적으로 로드할 수 있다.

## 5.7 서버에서 모듈 사용하기
Node 15.3.0 버전 이상에서는 자바스크립트 모듈을 지원한다. Node는 type이 module이라면 .mjs와 .js로 끝나는 파일을 자바스크립트 모듈로 취급한다.

## 5.8 모듈을 사용하면 생기는 이점
- 한 번만 실행된다.
- 자동으로 지연 로드된다.
- 유지보수와 재사용이 쉽다.
- 네임스페이스를 제공한다.
- 사용하지 않는 코드를 제거한다.

## 5.9 생성자, 게터, 세터를 가진 클래스
ES2015+ 에서는 모듈뿐만 아니라 생성자와 내부를 숨기는 기능을 가진 클래스(class)가 추가되었다. <br />
생성자(constructor)<br />
게터(getter)<br />
세터(setter)<br />
extends 키워드를 통해 클래스를 상속받을 수 있다.<br />
super 키워드로 부모 클래스의 메서드를 실행할 수 있다.<br />
클래스 내부 멤버는 기본적으로 공개 상태이며, #(해시)를 앞에 붙여 비공개 멤버로 만들 수 있다.<br />
static 키워드를 통해 정적 메서드와 프로퍼티를 정의할 수 있다. 정적 멤버는 클래스를 초기화하지 않고도 사용할 수 있다.

## 5.10 자바스크립트 프레임워크와 클래스
리액트 Hooks가 도입되기 전에는 상태와 라이프사이클을 다루기 위해서 어쩔 수 없이 함수 컴포넌트 대신 클래스 컴포넌트를 사용해야만 했다. 하지만 이제는 리액트 Hooks를 통해 클래스를 사용하지 않고도 컴포넌트의 상태와 라이프사이클을 관리할 수 있게 되었다. 그러나 여전히 클래스는 웹 컴포넌트(Web components)같은 컴포넌트 개발에 사용되고 있다.

